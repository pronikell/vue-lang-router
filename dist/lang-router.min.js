/**
 * vue-lang-router v1.2.4
 * (c) 2020 Radek Altof
 * Released under the MIT License.
 */

var LangRouter=function(t,e,a){"use strict";function r(t,e,a,r,n,i,o,s,l,u){"boolean"!=typeof o&&(l=s,s=o,o=!1);var c,h="function"==typeof a?a.options:a;if(t&&t.render&&(h.render=t.render,h.staticRenderFns=t.staticRenderFns,h._compiled=!0,n&&(h.functional=!0)),r&&(h._scopeId=r),i?(c=function(t){(t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),e&&e.call(this,l(t)),t&&t._registeredComponents&&t._registeredComponents.add(i)},h._ssrRegister=c):e&&(c=o?function(t){e.call(this,u(t,this.$root.$options.shadowRoot))}:function(t){e.call(this,s(t))}),c)if(h.functional){var d=h.render;h.render=function(t,e){return c.call(e),d(t,e)}}else{var f=h.beforeCreate;h.beforeCreate=f?[].concat(f,c):[c]}return a}e=e&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e,a=a&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a;var n,i,o,s=r({render:function(){var t=this.$createElement;return(this._self._c||t)("router-link",this._b({attrs:{to:this.localizedTo()}},"router-link",this.$attrs,!1),[this._t("default")],2)},staticRenderFns:[]},void 0,{name:"LocalizedLink",props:["to"],methods:{localizedTo:function(){if("string"==typeof this.to)return this.$localizePath(this.to);if("object"==typeof this.to&&"string"==typeof this.to.path){var t=JSON.parse(JSON.stringify(this.to));return t.path=this.$localizePath(t.path),t}return this.to}}},void 0,!1,void 0,!1,void 0,void 0,void 0),l=r({render:function(){var t=this.$createElement;return(this._self._c||t)(this.getTag(),{tag:"component",staticClass:"router-language-switcher"},[this._t("default",null,{links:this.links})],2)},staticRenderFns:[]},void 0,{name:"LanguageSwitcher",data:function(){return{currentUrl:this.url||this.$router.currentRoute.fullPath,links:[]}},props:["tag","active-class","url"],methods:{getTag:function(){return this.tag?this.tag:"div"},generateLinks:function(){var t=[],e=this.activeClass||"router-active-language",a=this._langRouter.translations;for(var r in a)a.hasOwnProperty(r)&&t.push({activeClass:r==this.$i18n.locale?e:"",langIndex:r,langName:a[r].name||r,url:this.$localizePath(this.currentUrl,r)});this.links=t}},watch:{$route:function(t){this.currentUrl=this.url||t.fullPath,this.generateLinks()}},mounted:function(){this.generateLinks()}},void 0,!1,void 0,!1,void 0,void 0,void 0),u=[];function c(t,e){console.error("LangRouter: "+t),void 0!==e&&console.error(e)}var h=function(t){for(var e in i)i.hasOwnProperty(e)&&!o[e]&&(o[e]={});for(var r in o)o.hasOwnProperty(r)&&f(t.routes,r);var n=new a(t);return n.beforeEach(p),n};function d(e){return t.i18n.locale=e,document.querySelector("html").setAttribute("lang",e),localStorage.setItem("VueAppLanguage",e),e}function f(t,e,a){t.forEach(function(t){var r=g(t.path,e);a||(r="/"+e+("/"!=r.charAt(0)?"/":"")+r),t.alias?Array.isArray(t.alias)||(t.alias=[t.alias]):t.alias=[],t.path!=r&&-1==t.alias.indexOf(r)&&t.alias.push(r),t.children&&f(t.children,e,!0)})}function p(e,a,r){var o=e.path.split("/")[1];if(!i[o]){var s=localStorage.getItem("VueAppLanguage");if(s&&i[s])o=s;else{var l=function(){function t(t){return t.split("-")[0].toLowerCase()}if(navigator.languages&&navigator.languages.length)return t(navigator.languages[0]||"");return t(navigator.language||navigator.browserLanguage||navigator.userLanguage||"")}();o=l&&i[l]?l:n}if(o!=n){var h=g(e.path,o);return h="/"+o+("/"!=h.charAt(0)?"/":"")+h,r({path:h,query:e.query,hash:e.hash})}}(function(e){return u.includes(e)?Promise.resolve(d(e)):(i[e]&&"function"==typeof i[e].load||c('Unable to load translations for "'+e+'", "load" function is missing!'),i[e].load().then(function(a){return t.i18n.setLocaleMessage(e,a.default||a),u.push(e),d(e)}).catch(function(t){c('Failed to load "'+e+'" translation.',t)}))})(o).then(function(){return r()})}function g(t,e,a,r){var n=t.split("/");if(a&&o[a]){if(e==a)return t;var i=o[a],s={};Object.keys(i).forEach(function(t){s[i[t]]=t});for(var l=r.split("/"),u=0;u<n.length;u++){var c=n[u];":"!=l[u].charAt(0)&&(n[u]=s[c]||c)}}for(var h=0;h<n.length;h++){var d=n[h];":"!=d.charAt(0)&&(n[h]=o[e][d]||d)}return n.join("/")}function v(e,a){a&&o[a]||(a=t.i18n.locale);var r=e,i="";e.includes("?")?(r=e.split("?")[0],i="?"+e.split("?")[1]):e.includes("#")&&(r=e.split("#")[0],i="#"+e.split("#")[1]);var s=r.split("/"),l=!!o[s[1]]&&s[1],u=this.$router.currentRoute.path.split("/")[1];if(a==n&&!o[u]&&!l)return e;var h=!1;if(l){var d=this.$router.resolve(r);0!=d.route.matched.length?h="/"==(h=d.route.matched[d.route.matched.length-1].path).charAt(0)?h:"/"+h:c('Router could not resolve path "'+r+'". URL localization may not work as expected.'),s.splice(1,1),r=s.join("/")}var f=g(r,a,l,h||r);return(f="/"+a+("/"!=f.charAt(0)?"/":"")+f)+i}return h.install=function(r,d){if(h.installed)c("Already installed.");else{var f;h.installed=!0,d||c("Options missing."),n=d.defaultLanguage,i=d.translations,o=d.localizedURLs||{},((f=Array.isArray(i))||"object"!=typeof i)&&c("options.translations should be an object, received "+(f?"array":typeof i)+" instead."),((f=Array.isArray(o))||"object"!=typeof o)&&c("options.localizedURLs should be an object, received "+(f?"array":typeof o)+" instead."),"string"!=typeof n&&c("options.defaultLanguage should be a string, received "+typeof n+" instead."),r.use(e),r.use(a);var p={};for(var g in i)if(i.hasOwnProperty(g)){var y=i[g].messages;"object"!=typeof y||Array.isArray(y)||(p[g]=i[g].messages,u.push(g))}t.i18n=new e({locale:n,fallbackLocale:n,messages:p,dateTimeFormats:d.i18nSettings.dateTimeFormats,pluralizationRules:d.i18nSettings.pluralizationRules}),r.prototype._langRouter={translations:i},r.prototype.$localizePath=v,r.component("localized-link",s),r.component("language-switcher",l)}},"undefined"!=typeof window&&window.Vue&&window.Vue.use(h),t.default=h,t}({},VueI18n,VueRouter);
